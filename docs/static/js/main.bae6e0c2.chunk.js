(this.webpackJsonpkeva_web=this.webpackJsonpkeva_web||[]).push([[0],{1052:function(e,t){},1095:function(e,t){},1267:function(e,t,n){"use strict";n.r(t);n(499);var r=n(4),a=n.n(r),c=n(126),s=n.n(c),i=(n(504),n(0)),o=n.n(i),u=n(15),l=n(82),f=n(83),h=n(162),p=n(161),b=n(69),v=n(47),d=n(70),k=n(303),m=n(128),x=n(163),g=n(491),y=n.n(g),w=n(125),O=n(496),_=n(497),j=n(194);function E(){var e=Object(b.a)(["\n  align-self: center;\n  position: absolute;\n  top: 330px;\n  left: calc(50% - 20px);\n  height: 40px;\n  width: 40px;\n  border-radius: 40px;\n  background-color: #fff;\n  display: flex;\n  justify-content: center;\n  box-shadow: 3px 3px 3px rgba(50,50,50,0.28);\n"]);return E=function(){return e},e}function P(){var e=Object(b.a)(["\n  height: 300px;\n  width: 300px;\n  border-width: 1px;\n  border-style: solid;\n  border-color: #e0e0e0;\n  border-radius: 10px;\n  background-color: #f3f3f3;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: cener;\n"]);return P=function(){return e},e}function S(){var e=Object(b.a)(["\n  height: 300px;\n  width: 300px;\n  object-fit: contain;\n  align-self: center;\n"]);return S=function(){return e},e}function T(){var e=Object(b.a)(["\n  color: green;\n  align-self: center;\n"]);return T=function(){return e},e}function q(){var e=Object(b.a)(["\n  cursor: pointer;\n  color: green;\n  font-size: 28px;\n  align-self: center;\n"]);return q=function(){return e},e}function B(){var e=Object(b.a)(["\n  cursor: pointer;\n  color: green;\n  font-size: 28px;\n  align-self: center;\n"]);return B=function(){return e},e}function C(){var e=Object(b.a)(["\n  color: #2980B9;\n  font-size: 30px;\n  align-self: center;\n  :hover {\n    color: #7FB3D5;\n  }\n"]);return C=function(){return e},e}function A(){var e=Object(b.a)(["\n  align-self: center;\n  borderWidth: 0;\n  margin-top: 20px;\n  margin-bottom: 20px;\n  cursor: pointer;\n  :hover: {\n    color: red;\n  }\n  :focus {\n    outline: none;\n  }\n"]);return A=function(){return e},e}var I=d.a.div(A()),F=Object(d.a)(j.b)(C()),K=Object(d.a)(j.c)(B()),M=Object(d.a)(j.a)(q()),N=Object(d.a)(O.a)(T()),D=d.a.img(S()),U=d.a.div(P()),V=d.a.div(E());function H(e){var t=Object(r.useState)(""),n=Object(w.a)(t,2),c=n[0],s=n[1],i=Object(r.useCallback)((function(t){t.forEach((function(t){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){s(n.result)},n.readAsDataURL(t),e.onFileChange(t)}))}),[]),o=Object(_.a)({onDrop:i}),u=o.getRootProps,l=o.getInputProps,f=null;return f=e.pinned?a.a.createElement(M,null):e.pinning?a.a.createElement(N,{animation:"border",role:"status"}):a.a.createElement(K,{onClick:e.onUpload}),a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{style:{alignSelf:"center",fontSize:18,color:"#555"}},"IPFS Browser Node"),a.a.createElement(I,u({refKey:"innerRef"}),a.a.createElement("input",l()),a.a.createElement(U,null,c.length>0?a.a.createElement(D,{src:c}):a.a.createElement(a.a.Fragment,null,a.a.createElement(F,null),a.a.createElement("p",{style:{alignSelf:"center",fontSize:12,color:"#777",marginTop:10}},"Click to Add Image")))),c.length>0&&a.a.createElement(V,{style:{pointerEvents:e.pinned?"none":"auto"}},f))}function R(){var e=Object(b.a)(["\n  align-self: center;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n  line-height: 4px;\n"]);return R=function(){return e},e}function L(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 20px;\n"]);return L=function(){return e},e}var G=d.a.div(L()),J=d.a.p(R()),W=function(e){return new Promise((function(t){return setTimeout(t,e)}))},z=(r.Component,function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this)).checkPeers=Object(u.a)(o.a.mark((function e(){var t,n,a,c,s,i,u,l,f,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.ipfs){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r.ipfs.swarm.peers();case 4:if(!((t=e.sent).length>0)){e.next=43;break}n=[],a=!0,c=!1,e.prev=9,i=Object(v.a)(r.ipfs.pin.ls());case 11:return e.next=13,i.next();case 13:return u=e.sent,a=u.done,e.next=17,u.value;case 17:if(l=e.sent,a){e.next=24;break}h=(f=l).cid,"recursive"==f.type&&n.push(h);case 21:a=!0,e.next=11;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(9),c=!0,s=e.t0;case 30:if(e.prev=30,e.prev=31,a||null==i.return){e.next=35;break}return e.next=35,i.return();case 35:if(e.prev=35,!c){e.next=38;break}throw s;case 38:return e.finish(35);case 39:return e.finish(30);case 40:r.setState({cids:n,ipfsPeers:t}),e.next=44;break;case 43:r.setState({ipfsPeers:[]});case 44:case"end":return e.stop()}}),e,null,[[9,26,30,40],[31,,35,39]])}))),r.onFileChange=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.fileToUpload=t,r.setState({pinned:!1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onUpload=Object(u.a)(o.a.mark((function e(){var t,n,a,c,s,i,u,l,f,h,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.fileToUpload){e.next=2;break}return e.abrupt("return");case 2:return r.setState({pinning:!0}),t=new File([r.fileToUpload],r.fileToUpload.name),e.next=6,r.ipfs.add(t);case 6:return n=e.sent,console.log("Added file:",n.path,n.cid.toString()),e.next=10,W(1e3);case 10:a=[],c=!0,s=!1,e.prev=13,u=Object(v.a)(r.ipfs.pin.ls());case 15:return e.next=17,u.next();case 17:return l=e.sent,c=l.done,e.next=21,l.value;case 21:if(f=e.sent,c){e.next=28;break}p=(h=f).cid,"recursive"==h.type&&a.push(p);case 25:c=!0,e.next=15;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(13),s=!0,i=e.t0;case 34:if(e.prev=34,e.prev=35,c||null==u.return){e.next=39;break}return e.next=39,u.return();case 39:if(e.prev=39,!s){e.next=42;break}throw i;case 42:return e.finish(39);case 43:return e.finish(34);case 44:r.setState({pinned:!0,pinning:!1,cids:a});case 45:case"end":return e.stop()}}),e,null,[[13,30,34,44],[35,,39,43]])}))),r.state={feature:"",ipfsVersion:"",ipfsPeers:[],cids:[]},r}return Object(f.a)(n,[{key:"startIpfs",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ipfs){e.next=4;break}console.log("IPFS already started"),e.next=26;break;case 4:return e.prev=4,console.time("IPFS Started"),e.next=8,y.a.create();case 8:return this.ipfs=e.sent,e.next=11,this.ipfs.version();case 11:return t=e.sent,e.next=14,this.ipfs.id();case 14:return n=e.sent,e.next=17,this.ipfs.swarm.peers();case 17:r=e.sent,this.setState({ipfsVersion:t.version,ipfsID:n.id,ipfsPeers:r}),console.timeEnd("IPFS Started"),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(4),console.error("IPFS init error:",e.t0),this.ipfs=null;case 26:case"end":return e.stop()}}),e,this,[[4,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"stopIpfs",value:function(){this.ipfs&&this.ipfs.stop&&(console.log("Stopping IPFS"),this.ipfs.stop().catch((function(e){return console.error(e)})),this.ipfs=null)}},{key:"getKeva",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.connectMain();case 2:return e.next=4,m.a.ping();case 4:if(!e.sent){e.next=18;break}return"5570511",e.next=9,Object(x.b)(m.a,"5570511");case 9:return t=e.sent,e.next=12,m.a.blockchainScripthash_getHistory(Object(x.c)(t.namespaceId));case 12:return n=e.sent,e.next=15,Object(x.a)(m.a,n,[],!0);case 15:r=e.sent,r=Object(x.d)(r),this.setState({feature:JSON.stringify(r)});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.startIpfs();case 2:setInterval(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkPeers();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),5e3);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.pinned,n=e.pinning,r=e.cids.map((function(e,t){return a.a.createElement("div",{key:t,style:{alignSelf:"center"}},a.a.createElement("a",{href:"https://ipfs.io/ipfs/".concat(e),style:{fontSize:12},target:"_blank"},e.toString()))}));return a.a.createElement(G,null,a.a.createElement(H,{onUpload:this.onUpload,onFileChange:this.onFileChange,pinned:t,pinning:n}),a.a.createElement("div",{style:{marginTop:10,marginBottom:10,alignSelf:"center"}},r),a.a.createElement(J,null,"Status: ",this.state.ipfsPeers.length>0?a.a.createElement("span",{style:{color:"green"}},this.state.ipfsPeers.length," Peers Connected"):a.a.createElement("span",{style:{color:"orange"}},"Connecting to Peers ...")),a.a.createElement(J,null,"Peer Id: ",this.state.ipfsID),a.a.createElement(J,null,"IPFS Version: ",this.state.ipfsVersion))}}]),n}(r.Component));var Y=function(){return a.a.createElement(z,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},128:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r=n(103),a=n(17),c=n(0),s=n.n(c),i=n(15),o=n(82),u=n(83),l=n(304),f=n(309),h=n(612),p=[{host:"127.0.0.1",ws:"8080"}],b=!1,v=!1,d=!1,k=!1,m=new(function(){function t(){Object(o.a)(this,t),this.getBalanceByAddress=function(){var t=Object(i.a)(s.a.mark((function t(n){var r,a,c,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b){t.next=2;break}throw new Error("Electrum client is not connected");case 2:return r=f.address.toOutputScript(n),a=f.crypto.sha256(r),c=e.from(h(a)),t.next=7,b.blockchainScripthash_getBalance(c.toString("hex"));case 7:return(i=t.sent).addr=n,t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getConfig=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Electrum client is not connected");case 2:return e.abrupt("return",{host:b.host,port:b.port,status:b.status?1:0,serverName:k});case 3:case"end":return e.stop()}}),e)}))),this.getTransactionsByAddress=function(){var t=Object(i.a)(s.a.mark((function t(n){var r,a,c,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b){t.next=2;break}throw new Error("Electrum client is not connected");case 2:return r=f.address.toOutputScript(n),a=f.crypto.sha256(r),c=e.from(h(a)),t.next=7,b.blockchainScripthash_getHistory(c.toString("hex"));case 7:return i=t.sent,t.abrupt("return",i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.PING_TIMEOUT=5e3,this.ping=Object(i.a)(s.a.mark((function e(){var t,n,r,a,c=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=new Promise((function(e,t){setTimeout((function(){return t(new Error("Ping timeout"))}),c.PING_TIMEOUT)})),n=b.server_ping(),e.next=5,Promise.race([n,t]);case 5:e.next=24;break;case 7:return e.prev=7,e.t0=e.catch(0),v=!1,b.close(),e.prev=11,r=this.connectMain(),a=new Promise((function(e,t){setTimeout((function(){return t(new Error("Ping timeout again"))}),c.PING_TIMEOUT)})),e.next=16,Promise.race([r,a]);case 16:if(v){e.next=18;break}throw new Error("Cannot reconnect");case 18:e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(11),new Error("Bad network");case 23:case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}}),e,this,[[0,7],[11,20]])}))),this.getTransactionsFullByAddress=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r,c,i,o,u,l,f,h,p,v,d,k;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getTransactionsByAddress(t);case 2:n=e.sent,r=[],c=Object(a.a)(n),e.prev=5,c.s();case 7:if((i=c.n()).done){e.next=43;break}return o=i.value,e.next=11,b.blockchainTransaction_get(o.tx_hash,!0);case 11:(u=e.sent).address=t,l=Object(a.a)(u.vin),e.prev=14,l.s();case 16:if((f=l.n()).done){e.next=24;break}return h=f.value,e.next=20,b.blockchainTransaction_get(h.txid,!0);case 20:(p=e.sent)&&p.vout&&p.vout[h.vout]&&(h.value=p.vout[h.vout].value,p.vout[h.vout].scriptPubKey&&p.vout[h.vout].scriptPubKey.addresses&&(h.addresses=p.vout[h.vout].scriptPubKey.addresses));case 22:e.next=16;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(14),l.e(e.t0);case 29:return e.prev=29,l.f(),e.finish(29);case 32:v=Object(a.a)(u.vout);try{for(v.s();!(d=v.n()).done;)(k=d.value).scriptPubKey&&k.scriptPubKey.addresses&&(k.addresses=k.scriptPubKey.addresses)}catch(s){v.e(s)}finally{v.f()}u.inputs=u.vin,u.outputs=u.vout,delete u.vin,delete u.vout,delete u.hex,delete u.hash,r.push(u);case 41:e.next=7;break;case 43:e.next=48;break;case 45:e.prev=45,e.t1=e.catch(5),c.e(e.t1);case 48:return e.prev=48,c.f(),e.finish(48);case 51:return e.abrupt("return",r);case 52:case"end":return e.stop()}}),e,this,[[5,45,48,51],[14,26,29,32]])})));return function(t){return e.apply(this,arguments)}}(),this.multiGetBalanceByAddress=function(){var t=Object(i.a)(s.a.mark((function t(n,r){var c,i,o,u,l,p,v,d,k,m,x,g,y,w,O,_,j;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||100,b){t.next=3;break}throw new Error("Electrum client is not connected");case 3:c={balance:0,unconfirmed_balance:0,addresses:{}},i=this.splitIntoChunks(n,r),o=Object(a.a)(i),t.prev=6,o.s();case 8:if((u=o.n()).done){t.next=22;break}l=u.value,p=[],v={},d=Object(a.a)(l);try{for(d.s();!(k=d.n()).done;)m=k.value,x=f.address.toOutputScript(m),g=f.crypto.sha256(x),y=(y=e.from(h(g))).toString("hex"),p.push(y),v[y]=m}catch(s){d.e(s)}finally{d.f()}return w=[],t.next=17,b.blockchainScripthash_getBalanceBatch(p);case 17:w=t.sent,O=Object(a.a)(w);try{for(O.s();!(_=O.n()).done;)j=_.value,c.balance+=+j.result.confirmed,c.unconfirmed_balance+=+j.result.unconfirmed,c.addresses[v[j.param]]=j.result}catch(s){O.e(s)}finally{O.f()}case 20:t.next=8;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(6),o.e(t.t0);case 27:return t.prev=27,o.f(),t.finish(27);case 30:return t.abrupt("return",c);case 31:case"end":return t.stop()}}),t,this,[[6,24,27,30]])})));return function(e,n){return t.apply(this,arguments)}}(),this.multiGetUtxoByAddress=function(){var t=Object(i.a)(s.a.mark((function t(n,r){var c,i,o,u,l,p,v,d,k,m,x,g,y,w,O,_,j,E,P,S;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||100,b){t.next=3;break}throw new Error("Electrum client is not connected");case 3:c={},i=this.splitIntoChunks(n,r),o=Object(a.a)(i),t.prev=6,o.s();case 8:if((u=o.n()).done){t.next=22;break}l=u.value,p=[],v={},d=Object(a.a)(l);try{for(d.s();!(k=d.n()).done;)m=k.value,x=f.address.toOutputScript(m),g=f.crypto.sha256(x),y=(y=e.from(h(g))).toString("hex"),p.push(y),v[y]=m}catch(s){d.e(s)}finally{d.f()}return w=[],t.next=17,b.blockchainScripthash_listunspentBatch(p);case 17:w=t.sent,O=Object(a.a)(w);try{for(O.s();!(_=O.n()).done;){j=_.value,c[v[j.param]]=j.result,E=Object(a.a)(c[v[j.param]]);try{for(E.s();!(P=E.n()).done;)(S=P.value).address=v[j.param],S.txId=S.tx_hash,S.vout=S.tx_pos,delete S.tx_pos,delete S.tx_hash}catch(s){E.e(s)}finally{E.f()}}}catch(s){O.e(s)}finally{O.f()}case 20:t.next=8;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(6),o.e(t.t0);case 27:return t.prev=27,o.f(),t.finish(27);case 30:return t.abrupt("return",c);case 31:case"end":return t.stop()}}),t,this,[[6,24,27,30]])})));return function(e,n){return t.apply(this,arguments)}}(),this.multiGetHistoryByAddress=function(){var t=Object(i.a)(s.a.mark((function t(n,r){var c,i,o,u,l,p,v,d,k,m,x,g,y,w,O,_,j,E,P;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||100,b){t.next=3;break}throw new Error("Electrum client is not connected");case 3:c={},i=this.splitIntoChunks(n,r),o=Object(a.a)(i),t.prev=6,o.s();case 8:if((u=o.n()).done){t.next=22;break}l=u.value,p=[],v={},d=Object(a.a)(l);try{for(d.s();!(k=d.n()).done;)m=k.value,x=f.address.toOutputScript(m),g=f.crypto.sha256(x),y=(y=e.from(h(g))).toString("hex"),p.push(y),v[y]=m}catch(s){d.e(s)}finally{d.f()}return w=[],t.next=17,b.blockchainScripthash_getHistoryBatch(p);case 17:w=t.sent,O=Object(a.a)(w);try{for(O.s();!(_=O.n()).done;){j=_.value,c[v[j.param]]=j.result,E=Object(a.a)(c[v[j.param]]);try{for(E.s();!(P=E.n()).done;)P.value.address=v[j.param]}catch(s){E.e(s)}finally{E.f()}}}catch(s){O.e(s)}finally{O.f()}case 20:t.next=8;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(6),o.e(t.t0);case 27:return t.prev=27,o.f(),t.finish(27);case 30:return t.abrupt("return",c);case 31:case"end":return t.stop()}}),t,this,[[6,24,27,30]])})));return function(e,n){return t.apply(this,arguments)}}(),this.multiGetTransactionByTxid=function(){var e=Object(i.a)(s.a.mark((function e(t,n,c,i){var o,u,l,f,h,p,v,d,k,m,x,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n||45,c=!1!==c,b){e.next=4;break}throw new Error("Electrum client is not connected");case 4:o={},u=Object(r.a)(new Set(t)),l=u.length,f=0,h=this.splitIntoChunks(u,n),p=Object(a.a)(h),e.prev=10,p.s();case 12:if((v=p.n()).done){e.next=41;break}return d=v.value,k=[],e.next=17,b.blockchainTransaction_getBatch(d,c);case 17:k=e.sent,i&&(f+=d.length,i(l,f)),m=Object(a.a)(k),e.prev=20,m.s();case 22:if((x=m.n()).done){e.next=31;break}if(!(g=x.value).error||-32600!==g.error.code){e.next=28;break}return e.next=27,b.blockchainTransaction_get(g.param,c);case 27:g.result=e.sent;case 28:o[g.param]=g.result;case 29:e.next=22;break;case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(20),m.e(e.t0);case 36:return e.prev=36,m.f(),e.finish(36);case 39:e.next=12;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(10),p.e(e.t1);case 46:return e.prev=46,p.f(),e.finish(46);case 49:return e.abrupt("return",o);case 50:case"end":return e.stop()}}),e,this,[[10,43,46,49],[20,33,36,39]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),this.waitTillConnected=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=0,e.abrupt("return",new Promise((function(e,r){t=setInterval((function(){v&&(clearInterval(t),e(!0)),d&&1===b.status&&(clearInterval(t),v=!0,e(!0)),n++>=30&&(clearInterval(t),r(new Error("Waiting for Electrum connection timeout")))}),500)})));case 3:case"end":return e.stop()}}),e)}))),this.estimateFees=Object(i.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.estimateFee(1);case 2:return t=e.sent,e.next=5,this.estimateFee(18);case 5:return n=e.sent,e.next=8,this.estimateFee(144);case 8:return r=e.sent,e.abrupt("return",{fast:t,medium:n,slow:r});case 10:case"end":return e.stop()}}),e,this)}))),this.estimateFee=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Electrum client is not connected");case 2:return t=t||1,e.next=5,b.blockchainEstimatefee(t);case 5:if(-1!==e.sent){e.next=8;break}return e.abrupt("return",1);case 8:return e.abrupt("return",1024);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.serverFeatures=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Electrum client is not connected");case 2:return e.abrupt("return",b.server_features());case 3:case"end":return e.stop()}}),e)}))),this.broadcast=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Electrum client is not connected");case 2:return e.prev=2,e.next=5,b.blockchainTransaction_broadcast(t);case 5:return n=e.sent,e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),this.broadcastV2=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Electrum client is not connected");case 2:return e.abrupt("return",b.blockchainTransaction_broadcast(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.estimateCurrentBlockheight=function(){return Math.floor(627179+(+new Date-1587570465609)/1e3/60/9.5)},this.testConnection=function(){var e=Object(i.a)(s.a.mark((function e(t,n,r){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new l.a(r||n,t,r?"tls":"tcp"),e.prev=1,e.next=4,a.connect();case 4:return e.next=6,a.server_version("2.7.11","1.4");case 6:return e.next=8,a.server_ping();case 8:return a.close(),e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),this.forceDisconnect=function(){b.close()},this.splitIntoChunks=function(e,t){var n,r=[];for(n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r},this.blockchainTransaction_get=function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.blockchainTransaction_get(t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.blockchainTransaction_getBatch=function(){var e=Object(i.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.blockchainTransaction_getBatch(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.blockchainScripthash_getHistory=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.blockchainScripthash_getHistory(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.blockchainTransaction_getMerkle=function(){var e=Object(i.a)(s.a.mark((function e(t,n,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.blockchainTransaction_getMerkle(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.blockchainTransaction_idFromPos=function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.blockchainTransaction_idFromPos(t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}return Object(u.a)(t,[{key:"connectMain",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRandomHardcodedPeer();case 2:return t=e.sent,e.prev=3,console.log("begin connection:",JSON.stringify(t)),b=new l.a(t.ws,t.host,t.wss?"wss":"ws"),e.next=8,b.initElectrum({client:"keva_web_client",version:"1.4"});case 8:(n=e.sent)&&n[0]&&(console.log("connected to ",n),k=n[0],v=!0,d=!0),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),v=!1,console.log("bad connection:",JSON.stringify(t),e.t0);case 16:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getRandomHardcodedPeer",value:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p[p.length*Math.random()|0]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),t}())}).call(this,n(6).Buffer)},163:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return S})),n.d(t,"d",(function(){return q})),n.d(t,"b",(function(){return B}));var r=n(0),a=n.n(r),c=n(125),s=n(490),i=n(17),o=n(15),u=n(103),l=n(309),f=n(108),h=(n(613),208),p=209,b=210,v=function(t,n){return function(r){return e.from(r,t).toString(n)}},d=(v("utf8","hex"),v("hex","utf8"));function k(t){for(var n=e.alloc(t.length),r=0,a=t.length-1;r<=a;++r,--a)n[r]=t[a],n[a]=t[r];return n}function m(t){var n=e.from(t,"hex");return f.encode(n)}function x(e){return f.decode(e)}function g(e){var t=parseInt(e,10);if(t.toString(10)!=e)return e;if(t>2147483647)return e;if(t<0){var n=(-t).toString(16).length;2==n?t=128-t:n<=4?t=32768-t:n<=6?t=8388608-t:n<=8&&(t=2147483648-t)}return function(e){e.length%2!=0&&(e="0"+e);for(var t=[],n=e.length-2;n>=0;)t.push(e.substr(n,2)),n-=2;return t.join("")}(t.toString(16))}function y(e){return e[0]===h?{op:"KEVA_OP_NAMESPACE",namespaceId:m(e[1]),displayName:d(g(e[2]))}:e[0]===p?{op:"KEVA_OP_PUT",namespaceId:m(e[1]),key:d(g(e[2])),value:d(g(e[3]))}:e[0]===b?{op:"KEVA_OP_DELETE",namespaceId:m(e[1]),key:d(g(e[2]))}:null}function w(e){return e.startsWith("OP_KEVA_PUT")?function(e){var t=e.match(/^OP_KEVA_PUT\s([0-9A-Fa-f]+)\s(-?[0-9A-Fa-f]+)\s(-?[0-9A-Fa-f]+)/);return t&&4===t.length?[p].concat(Object(u.a)(t.slice(1))):null}(e):e.startsWith("OP_KEVA_DELETE")?function(e){var t=e.match(/^OP_KEVA_DELETE\s([0-9A-Fa-f]+)\s(-?[0-9A-Fa-f]+)/);return t&&3===t.length?[b].concat(Object(u.a)(t.slice(1))):null}(e):e.startsWith("OP_KEVA_NAMESPACE")?function(e){var t=e.match(/^OP_KEVA_NAMESPACE\s([0-9A-Fa-f]+)\s(-?[0-9A-Fa-f]+)/);return t&&3===t.length?[h].concat(Object(u.a)(t.slice(1))):null}(e):null}function O(t){var n=e.alloc(0),r=l.script,a=r.compile([p,x(t),n,r.OPS.OP_2DROP,r.OPS.OP_DROP,r.OPS.OP_RETURN]),c=l.crypto.sha256(a);return e.from(k(c)).toString("hex")}function _(e,t,n,r){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(a.a.mark((function e(t,n,r,s){var o,u,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=[]).push([r,s]),u=a.a.mark((function e(){var r,s,u,l,f,p,b,v,d,k,m,x,g,y,O,_,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.pop(),s=Object(c.a)(r,2),u=s[0],l=s[1],f=n.find((function(e){return e.txid==u}))){e.next=6;break}return e.next=5,t.blockchainTransaction_get(u,!0);case 5:f=e.sent;case 6:p=f.outputs||f.vout,b=Object(i.a)(p),e.prev=8,b.s();case 10:if((v=b.n()).done){e.next=22;break}if(d=v.value,k=w(d.scriptPubKey.asm)){e.next=15;break}return e.abrupt("continue",20);case 15:if(k[0]!==h){e.next=18;break}if(l&&l!==k[1]){e.next=18;break}return e.abrupt("return",{v:{txid:u,result:k,address:d.scriptPubKey.addresses[0]}});case 18:if(m=k[1],!l||m===l){x=f.inputs||f.vin,g=x.map((function(e){return e.txid})),y=g.filter((function(e,t,n){return n.indexOf(e)===t})),O=Object(i.a)(y);try{for(O.s();!(_=O.n()).done;)j=_.value,o.push([j,m])}catch(a){O.e(a)}finally{O.f()}}case 20:e.next=10;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(8),b.e(e.t0);case 27:return e.prev=27,b.f(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[8,24,27,30]])}));case 3:if(!(o.length>0)){e.next=10;break}return e.delegateYield(u(),"t0",5);case 5:if("object"!==typeof(l=e.t0)){e.next=8;break}return e.abrupt("return",l.v);case 8:e.next=3;break;case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(a.a.mark((function e(t,n){var r,c,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=parseInt(n.substring(0,1)),c=n.substring(1,1+r),s=n.substring(1+r,2+r),e.next=5,t.blockchainTransaction_idFromPos(c,s);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n,r,a){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(a.a.mark((function e(t,n,r,c,s){var o,l,f,h,p,b,v,d,k,m,x,g,O;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c&&n.length>20?n.slice(n.length-20):n,l=[],r=r||[],o.forEach((function(e){r.find((function(t){return t.tx==e.tx_hash&&t.height==e.height}))||l.push(e.tx_hash)})),0!=l.length){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,t.multiGetTransactionByTxid(l,20,!0,s);case 8:for(f=e.sent,h=[],p=0,b=l;p<b.length;p++)v=b[p],h.push(f[v]);for(d=[],k=function(e){var t,n=h[e].result||h[e],r=n.outputs||n.vout,a=Object(i.a)(r);try{for(a.s();!(t=a.n()).done;){var c=t.value,s=w(c.scriptPubKey.asm);if(s){var u=y(s);u.tx=n.txid;var l=o.find((function(e){return e.tx_hash==n.txid}));u.height=l.height,u.n=c.n,u.time=n.time;var f=c.scriptPubKey.addresses[0];u.address=f,d.push(u)}}}catch(p){a.e(p)}finally{a.f()}},m=0;m<h.length;m++)k(m);x=Object(i.a)(r);try{for(O=function(){var e=g.value,t=d.findIndex((function(t){return t.tx==e.tx}));t>=0&&(e.height=d[t].height,e.time=d[t].time,d.splice(t,1))},x.s();!(g=x.n()).done;)O()}catch(a){x.e(a)}finally{x.f()}return e.abrupt("return",[].concat(Object(u.a)(r),d));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){var t,n=[],r=Object(i.a)(e);try{var a=function(){var e=t.value;"KEVA_OP_PUT"===e.op?(n=n.filter((function(t){return t.key!=e.key}))).push(e):"KEVA_OP_DELETE"===e.op?n=n.filter((function(t){return t.key!=e.key})):"KEVA_OP_NAMESPACE"===e.op&&n.push(Object(s.a)({key:"_KEVA_NS_",value:e.displayName},e))};for(r.s();!(t=r.n()).done;)a()}catch(c){r.e(c)}finally{r.f()}return n.reverse()}function B(e,t){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(a.a.mark((function e(t,n){var r,c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,n);case 2:return r=e.sent,e.next=5,_(t,[],r);case 5:if(c=e.sent){e.next=8;break}return e.abrupt("return");case 8:return s=y(c.result),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(6).Buffer)},226:function(e,t){},280:function(e,t){},304:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(82),a=n(83),c=n(164),s=n(75),i=n(162),o=n(161),u=n(17),l=function(e,t,n){return JSON.stringify({jsonrpc:"2.0",method:e,params:t,id:n})},f=n(32).EventEmitter,h=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e,a,c,s){var i;return Object(r.a)(this,n),(i=t.call(this,e,a,c,s)).timeLastCall=0,i}return Object(a.a)(n,[{key:"initElectrum",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxRetry:1e3,callback:null};return this.persistencePolicy=n,this.electrumConfig=e,this.timeLastCall=0,this.connect().then((function(){return t.server_version(t.electrumConfig.client,t.electrumConfig.version)}))}},{key:"request",value:function(e,t){return this.timeLastCall=(new Date).getTime(),Object(c.a)(Object(s.a)(n.prototype),"request",this).call(this,e,t).then((function(e){return e}))}},{key:"requestBatch",value:function(e,t,r){return this.timeLastCall=(new Date).getTime(),Object(c.a)(Object(s.a)(n.prototype),"requestBatch",this).call(this,e,t,r).then((function(e){return e}))}},{key:"onClose",value:function(){var e=this;Object(c.a)(Object(s.a)(n.prototype),"onClose",this).call(this);["server.peers.subscribe","blockchain.numblocks.subscribe","blockchain.headers.subscribe","blockchain.address.subscribe"].forEach((function(t){return e.subscribe.removeAllListeners(t)})),setTimeout((function(){null!=e.persistencePolicy&&e.persistencePolicy.maxRetry>0?(e.reconnect(),e.persistencePolicy.maxRetry-=1):null!=e.persistencePolicy&&null!=e.persistencePolicy.callback?e.persistencePolicy.callback():null==e.persistencePolicy&&e.reconnect()}),1e4)}},{key:"keepAlive",value:function(){var e=this;null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){0!==e.timeLastCall&&(new Date).getTime()>e.timeLastCall+5e3&&e.server_ping()}),5e3)}},{key:"close",value:function(){Object(c.a)(Object(s.a)(n.prototype),"close",this).call(this),null!=this.timeout&&clearTimeout(this.timeout),this.reconnect=this.reconnect=this.onClose=this.keepAlive=function(){}}},{key:"reconnect",value:function(){return this.initSocket(),this.initElectrum(this.electrumConfig)}},{key:"server_version",value:function(e,t){return this.request("server.version",[e,t])}},{key:"server_banner",value:function(){return this.request("server.banner",[])}},{key:"server_features",value:function(){return this.request("server.features",[])}},{key:"server_ping",value:function(){return this.request("server.ping",[])}},{key:"server_addPeer",value:function(e){return this.request("server.add_peer",[e])}},{key:"serverDonation_address",value:function(){return this.request("server.donation_address",[])}},{key:"serverPeers_subscribe",value:function(){return this.request("server.peers.subscribe",[])}},{key:"blockchainAddress_getProof",value:function(e){return this.request("blockchain.address.get_proof",[e])}},{key:"blockchainScripthash_getBalance",value:function(e){return this.request("blockchain.scripthash.get_balance",[e])}},{key:"blockchainScripthash_getBalanceBatch",value:function(e){return this.requestBatch("blockchain.scripthash.get_balance",e)}},{key:"blockchainScripthash_listunspentBatch",value:function(e){return this.requestBatch("blockchain.scripthash.listunspent",e)}},{key:"blockchainScripthash_getHistory",value:function(e){return this.request("blockchain.scripthash.get_history",[e])}},{key:"blockchainScripthash_getHistoryBatch",value:function(e){return this.requestBatch("blockchain.scripthash.get_history",e)}},{key:"blockchainScripthash_getMempool",value:function(e){return this.request("blockchain.scripthash.get_mempool",[e])}},{key:"blockchainScripthash_listunspent",value:function(e){return this.request("blockchain.scripthash.listunspent",[e])}},{key:"blockchainScripthash_subscribe",value:function(e){return this.request("blockchain.scripthash.subscribe",[e])}},{key:"blockchainBlock_getHeader",value:function(e){return this.request("blockchain.block.get_header",[e])}},{key:"blockchainBlock_headers",value:function(e,t){return this.request("blockchain.block.headeres",[e,t])}},{key:"blockchainEstimatefee",value:function(e){return this.request("blockchain.estimatefee",[e])}},{key:"blockchainHeaders_subscribe",value:function(e){return this.request("blockchain.headers.subscribe",[e||!1])}},{key:"blockchain_relayfee",value:function(){return this.request("blockchain.relayfee",[])}},{key:"blockchainTransaction_broadcast",value:function(e){return this.request("blockchain.transaction.broadcast",[e])}},{key:"blockchainTransaction_get",value:function(e,t){return this.request("blockchain.transaction.get",[e,t||!1])}},{key:"blockchainTransaction_getBatch",value:function(e,t){return this.requestBatch("blockchain.transaction.get",e,t)}},{key:"blockchainTransaction_getMerkle",value:function(e,t){return this.request("blockchain.transaction.get_merkle",[e,t])}},{key:"blockchainTransaction_idFromPos",value:function(e,t,n){return this.request("blockchain.transaction.id_from_pos",[e,t,n||!1])}},{key:"mempool_getFeeHistogram",value:function(){return this.request("mempool.get_fee_histogram",[])}}]),n}(function(){function e(t,n,a,c){Object(r.a)(this,e),this.id=0,this.port=t,this.host=n,this.callback_message_queue={},this.subscribe=new f,this._protocol=a,this._options=c}return Object(a.a)(e,[{key:"connect",value:function(){return 1===this.status?Promise.resolve():(this.status=1,this.connectSocket(this.port,this.host,this._protocol))}},{key:"connectSocket",value:function(e,t,n){var r=this;return new Promise((function(a,c){var s=new WebSocket("".concat(n,"://").concat(t,":").concat(e,"/"));r.ws=s,s.onopen=function(){console.log("connected websocket main component"),a()},s.onmessage=function(e){r.onMessage(e.data)},s.onclose=function(e){console.log("Socket is closed: "+JSON.stringify(e)),r.status=0,r.onClose()};s.onerror=function(e){var t;console.error("Socket encountered error: ",e.message,"Closing socket"),r.status=0,s.close(),c(t)}}))}},{key:"close",value:function(){0!==this.status&&(this.ws&&(this.ws.close(),this.ws=null),this.status=0)}},{key:"request",value:function(e,t){var n=this;return 0===this.status?Promise.reject(new Error("ESOCKET")):new Promise((function(r,a){var c=++n.id,s=l(e,t,c);n.callback_message_queue[c]=function(e,t){return function(n,r){n?t(n):e(r)}}(r,a),n.ws.send(s+"\n","utf8")}))}},{key:"requestBatch",value:function(e,t,n){var r=this;return 0===this.status?Promise.reject(new Error("ESOCKET")):new Promise((function(a,c){var s,i={},o=[],f=Object(u.a)(t);try{for(f.s();!(s=f.n()).done;){var h=s.value,p=++r.id;void 0!==n?o.push(l(e,[h,n],p)):o.push(l(e,[h],p)),i[p]=h}}catch(v){f.e(v)}finally{f.f()}var b="["+o.join(",")+"]";r.callback_message_queue[r.id]=function(e,t,n){return function(r,a){if(a&&a[0]&&a[0].id){var c,s=Object(u.a)(a);try{for(s.s();!(c=s.n()).done;){var i=c.value;i.param=n[i.id]}}catch(r){s.e(r)}finally{s.f()}}r?t(r):e(a)}}(a,c,i),r.ws.send(b+"\n","utf8")}))}},{key:"response",value:function(e){var t;if(!e.id&&e[0]&&e[0].id){var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.id&&this.callback_message_queue[a.id]&&(t=this.callback_message_queue[a.id],delete this.callback_message_queue[a.id])}}catch(c){r.e(c)}finally{r.f()}}else t=this.callback_message_queue[e.id];t?(delete this.callback_message_queue[e.id],e.error?t(e.error):t(null,e.result||e)):console.log("Can't get callback")}},{key:"onMessage",value:function(e){var t=JSON.parse(e);t instanceof Array||0!==t.id?this.response(t):this.subscribe.emit(t.method,t.params)}},{key:"onClose",value:function(e){var t=this;this.status=0,Object.keys(this.callback_message_queue).forEach((function(e){t.callback_message_queue[e](new Error("close connect")),delete t.callback_message_queue[e]}))}}]),e}())},498:function(e,t,n){e.exports=n(1267)},504:function(e,t,n){},511:function(e,t){},513:function(e,t){},523:function(e,t){},525:function(e,t){},537:function(e,t){},539:function(e,t){},540:function(e,t){},620:function(e,t){},819:function(e,t){},972:function(e,t){}},[[498,1,2]]]);
//# sourceMappingURL=main.bae6e0c2.chunk.js.map